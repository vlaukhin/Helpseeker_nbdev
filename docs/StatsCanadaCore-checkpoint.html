---

title: Merge Stats Canada


keywords: fastai
sidebar: home_sidebar

summary: "Merge scraped stats Canada data based on region."
description: "Merge scraped stats Canada data based on region."
nb_path: ".ipynb_checkpoints\StatsCanadaCore-checkpoint.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: .ipynb_checkpoints\StatsCanadaCore-checkpoint.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Config-Script">Config Script<a class="anchor-link" href="#Config-Script"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Reading in the config parameters as variables. \
When building the package with <code>nbdev_build</code> anything cells with the <code>#export</code> tag will be exported to the default script which is <code>StatsCanada.py</code>.<br>
Otherwise a module name can be specified.</p>
<p>Note: the module being exported to must already exist. However it can be just a template.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Preparing-Logger">Preparing Logger<a class="anchor-link" href="#Preparing-Logger"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Struct log for logging merging pipeline progress</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="add_timestamp" class="doc_header"><code>add_timestamp</code><a href="https://github.com/byz007/Helpseeker_nbdev/tree/master/Helpseeker_nbdev/logging.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>add_timestamp</code>(<strong><code>_</code></strong>, <strong><code>__</code></strong>, <strong><code>event_dict</code></strong>)</p>
</blockquote>
<p>Add timestamp to a structlog entry
Args:
    event_dict: structlog event_dict</p>
<p>Returns:
    event_dict: modified structlog event_dict, now includes a timestamp</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="logging_setup" class="doc_header"><code>logging_setup</code><a href="https://github.com/byz007/Helpseeker_nbdev/tree/master/Helpseeker_nbdev/logging.py#L26" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>logging_setup</code>(<strong><code>log_level</code></strong>=<em><code>'INFO'</code></em>)</p>
</blockquote>
<p>Set up standard structlog logger
Args:
    log_level: string, defined the logging level. Can be: 'INFO', 'WARNING'</p>
<p>Returns:
    logger: instantiated logger</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Preprocessing-of-Target-Values">Preprocessing of Target Values<a class="anchor-link" href="#Preprocessing-of-Target-Values"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Reading in the target values and mapping to polygons target locations to polygons\
Returns a dictionary of geo dataframes</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_target_df" class="doc_header"><code>get_target_df</code><a href="https://github.com/byz007/Helpseeker_nbdev/tree/master/Helpseeker_nbdev/TargetValuesPreprocessing.py#L49" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_target_df</code>(<strong><code>target_features</code></strong>, <strong><code>target_path</code></strong>, <strong><code>polygon_path</code></strong>, <strong><code>target_df_regions</code></strong>, <strong><code>logger</code></strong>)</p>
</blockquote>
<p>main function for this script to return a dictionary of dataframes mapped to each target,</p>
<h2 id="parameters:">parameters:<a class="anchor-link" href="#parameters:"> </a></h2><p>target_features -&gt; gp.GeoDataFrame</p>
<p>target_values_paths -&gt; dict[str,str] paths to the target csvs</p>
<p>target_polygon_paths -&gt; dict[str,str] paths to the polygon .gpkg files</p>
<p>target_df_regions -&gt; list[str]</p>
<h2 id="returns:">returns:<a class="anchor-link" href="#returns:"> </a></h2><p>mapped_target -&gt; dict[str,gp.GeoDataFrame]</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example of documentation:</p>
<p>The <code>show_doc</code> function will give a sample of how the documentation will look with the current doc strings.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example of exploratory testing \
\
We are able to experinment with and visually validate the modules, similarly to EDA code where the ML dev is constantly iterating. This will not be exported to a <code>.py</code> file during the build.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can export the notebook to a package with the following function</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span>

<span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted config.ipynb.
Converted index.ipynb.
Converted logging.ipynb.
Converted StatsCanadaCore.ipynb.
Converted TargetValuesPreprocessing.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

